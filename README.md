[![GitHub Downloads](https://img.shields.io/github/downloads/Kamiloo13/CS2_ChangeLevelChat/total.svg?style=flat-square&label=Downloads)](https://github.com/Kamiloo13/CS2_ChangeLevelChat/releases/latest)

# CS2 Change Level with Chat
> Written in C# for **Counter-Strike 2** using [CounterStrikeSharp](https://github.com/roflmuffin/CounterStrikeSharp)

Allows users to change the map and game mode with in-game chat. 
- **Game modes** are just simple config files stored in `csgo/cfg/` directory, those allow for a fast game_type change (e.g. **aim_based**.cfg -> **smoke_training**.cfg).
- This plugin isn't planned to be used on a public server, it's more for private servers where you want to play with friends that you trust. 
- Can be toggled off with a command or in config by default.
- This plugin **IS NOT** a voting system and **IT IS** an instant map change. If you want a voting system instead, you can use [cs2-rockthevote](https://github.com/abnerfs/cs2-rockthevote) plugin.

### Setup
* Make sure your server has [CounterStrikeSharp](https://github.com/roflmuffin/CounterStrikeSharp) and [Metamod](https://www.sourcemm.net/downloads.php/?branch=master) properly installed. You can find the instalation instructions [here](https://docs.cssharp.dev/docs/guides/getting-started.html).
* Download the zip file from the latest [release](https://github.com/Kamiloo13/CS2_ChangeLevelChat/releases), and extract the contents into your `csgo/addons/counterstrikesharp/plugins` directory.
* Configuration file is located in `csgo/addons/counterstrikesharp/configs/plugins/ChangeLevelChat/ChangeLevelChat.json`. You can change the maps and gamemodes avaivable there. *It will be created and read on server boot or hot reload*.

### Tip
You can use the `ds_workshop_listmaps` command to list the maps that are currently available in the collection (to host a collection of maps, use `+host_workshop_collection <collection_id>`)

### Commands
| Command         | Arguments                         | Description                                                          | Permissions |
|-----------------|-----------------------------------|----------------------------------------------------------------------|-------------|
| !changelevel    | \<mapname\> \<gamemode?\>         | Change the map and if specified game mode                            | everyone    |
| !changemode     | \<gamemode>                       | Change the game mode                                                 | everyone    |
| !maps           |                                   | List all maps (configured in config)                                 | everyone    |
| !modes          |                                   | List all gamemodes (configured in config)                            | everyone    |
| !changetoggle   |                                   | Toggle if users can use this plugin                                  | @css/admin  |


### Example Config
The line at the top doesn't affect the plugin, although the syntax validation might give you an error in VS Code.
```json
// This configuration was automatically generated by CounterStrikeSharp for plugin 'ChangeLevelChat', at 2024/04/07 09:58:51
{
  "isEnabled": true,
  "Default Game Mode": "aim_maps",
  "Game Modes": [
    "aim_maps",
    "smoke_train"
  ],
  "Maps": [
    "ar_baggage",
    "ar_shoots",
    "cs_italy",
    "cs_office",
    "de_ancient",
    "de_anubis",
    "de_dust2",
    "de_inferno",
    "de_mirage",
    "de_nuke",
    "de_overpass",
    "de_vertigo"
  ],
  "Workshop Maps": [
    "aim_redline_fp",
    "awp_india",
    "awp_roost_fp",
    "fy_pool_day",
    "awp_lego2",
    "aim_map",
    "aim_redline"
  ],
  "Log Level": "Info",
  "ConfigVersion": 1
}
```

### Roadmap
- [ ] Add permissions for commands
